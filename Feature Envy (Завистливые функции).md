Завистливые функции

Симптомы и признаки: Метод обращается к данным другого объекта чаще, чем к собственным данным. Чаще всего предметом зависти являяются данные другого объекта\класса.

Причины появления: Этот запах может появиться после перемещения каких-то полей в класс данных. В этом случае операции с данными, возможно, также следует переместить в этот класс.

Лечение: Следует придерживаться такого правила: то, что изменяется одновременно, нужно хранить в одном месте. Обычно данные и функции, использующие эти данные, также изменяются вместе (хотя бывают исключения).

1. Если метод явно следует перенести в другое место, примените перемещение метода.
2. Если только часть метода обращается к данным другого объекта, примените извлечение метода к этой части.
3. Если метод использует функции нескольких других классов, нужно сначала определить, в каком классе находится больше всего используемых данных. Затем следует переместить метод в этот класс вместе с остальными данными. Как альтернатива, с помощью извлечения метода метод разбивается на несколько частей, и они помещаются в разные места в других классах.

Выигрыш

1. Уменьшение дублирования кода (если код работы с данными переехал в одно общее место).
2. Улучшение организации кода (т.к. методы работы с данными находятся возле этих данных).

Исключение: паттерны "Стратегия" и "Посетитель", которые позволяют легко изменить поведение, потому что они изолируют небольшой объем функций, которые должны быть заменены, ценой увеличения косвенности.
