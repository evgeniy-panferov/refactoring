Создание шаблонного метода

Проблема: в подклассах реализованы алгоритмы, содержащие похожие шаги и одинаковый порядок выполнения этих шагов.

Решение: вынесите структуру алгоритма и одинаковые шаги в суперкласс, а в подклассах оставьте реализацию отличающихся шагов.

Причины рефакторинга: подклассы развиваются параллельно. Иногда разными людьми, что приводит к дублированию кода и ошибок, а также к усложнению поддержки, т.к. каждое изменение приходится проводить во всех подклассах.

Достоинства

1. Когда мы говорим о дублировании кода, не всегда имеется в виду программирование методом копирования-вставки. Нередко дублирование возникает на более абстрактном уровне. Например, у вас есть метод сортировки чисел и метод сортировки коллекции объектов, при этом, единственное, чем они отличаются это сравнение элементов. Создание шаблонного метода позволяет справиться с таким дублированием, объединив общие шаги алгоритма в суперклассе и оставив различия для подклассов.
2. Создание шаблонного метода реализует принцип открытости/закрытости. При появлении новой версии алгоритма, вам нужно будет всего лишь создать новый подкласс, не меняя существующий код.

Порядок рефакторинга

1. Разбейте алгоритмы в подклассах на составные части, описанные в отдельных методах. В этом может помочь <a href="https://github.com/helenasilkina/refactoring/blob/master/Extract_Method%20(Извлечение%20метода).md">извлечение метода</a>.
2. Получившиеся методы, одинаковые для всех подклассов, можете смело перемещать в суперкласс, используя <a href="https://github.com/helenasilkina/refactoring/blob/master/Pull%20Up%20Method%20(Подъём%20метода).md">подъём метода</a>.
3. Отличающиеся методы приведите к единым названиям с помощью <a href="https://github.com/helenasilkina/refactoring/blob/master/Rename%20Method%20(Переименование%20метода).md">переименования метода</a>.
4. Поместите сигнатуры отличающихся методов в суперкласс как абстрактные с помощью <a href="https://github.com/helenasilkina/refactoring/blob/master/Pull%20Up%20Method%20(Подъём%20метода).md">подъёма метода</a>. Их реализации оставьте в подклассах.
5. И наконец, поднимите основной метод алгоритма в суперкласс. Он теперь должен работать с методами-шагами, описанными в суперклассе — реальными или абстрактными.
