<strong>Введение внешнего метода</strong>

Проблема: служебный класс не содержит метода, который вам нужен, при этом у вас нет возможности добавить метод в этот класс.

Решение: добавьте метод в клиентский класс и передавайте в него объект служебного класса в качестве аргумента.

Примеры: <a href="https://github.com/helenasilkina/refactoring/blob/master/Introduce_Foreign_Method.py">Introduce_Foreign_Method.py</a>,  <a href="https://github.com/helenasilkina/refactoring/blob/master/Introduce_Foreign_Method.js">Introduce_Foreign_Method.js</a>

Причины рефакторинга:

1. У вас есть код, который использует данные и методы определённого класса. Вы приходите к выводу, что этот код намного лучше будет смотреться и работать внутри нового метода в этом классе. Однако возможность добавить такой метод в класс у вас отсутствует (например, потому что класс находится в сторонней библиотеке).
2. Данный рефакторинг особенно выгоден в случаях, когда участок кода, который вы хотите перенести в метод, повторяется несколько раз в различных местах программы.
3. Так как вы передаёте объект служебного класса в параметры нового метода, у вас есть доступ ко всем его полям. Вы можете делать внутри этого метода практически все, что вам может потребоваться, как если бы метод был частью служебного класса.

Достоинства: убирает дублирование кода. Если ваш участок кода повторяется в нескольких местах, вы можете заменить их вызовом метода. Это удобнее дублирования даже с учетом того, что внешний метод находится не там, где хотелось бы.

Недостатки: причины того, почему метод служебного класса находится в клиентском классе, не всегда очевидны для того специалиста, который будет поддерживать код после вас. Если данный метод может быть использован и в других классах, имеет смысл создать обёртку над служебным классом, и поместить метод туда. То же самое имеет смысл сделать, если таких служебных методов несколько. В этом поможет рефакторинг <a href="https://github.com/helenasilkina/refactoring/blob/master/Introduce%20Local%20Extension%20(Введение%20локального%20расширения).md">введение локального расширения</a>.

Порядок рефакторинга:

1. Создайте новый метод в клиентском классе.
2. В этом методе создайте параметр, в который будет передаваться объект служебного класса. Если этот объект может быть получен из клиентского класса, параметр можно не создавать.
3. Извлеките волнующие вас участки кода в этот метод и замените их вызовами метода.
4. Обязательно оставьте в комментарии к этому методу метку Foreign method и призыв поместить этот метод в служебный класс, если такая возможность появится в дальнейшем. Это облегчит понимание того, почему этот метод находится в данном классе для тех, кто будет поддерживать программный продукт в будущем.
