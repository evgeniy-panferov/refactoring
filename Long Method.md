Длинный метод

Симптомы и признаки: Метод содержит слишком большое число строк кода. Длина метода более десяти строк должна начинать вас беспокоить.

Причины появления

1. В метод всё время что-то добавляется, но ничего не выносится. Так как писать код намного проще, чем читать, этот запах долго остаётся незамеченным — до тех пор пока метод не превратится в настоящего монстра.
2. Стоит помнить, что человеку зачастую ментально сложнее создать новый метод, чем дописать что-то в уже существующий: «Как же, мне нужно добавить всего две строки, не буду же я создавать для этого целый метод».
3. Таким образом, добавляется одна строка за другой, а в результате метод превращается в большую тарелку спагетти.

Лечение: Следует придерживаться такого правила: если ощущается необходимость что-то прокомментировать внутри метода, этот код лучше выделить в новый метод. Даже одну строку имеет смысл выделить в метод, если она нуждается в разъяснениях. К тому же, если у метода хорошее название, то не нужно будет смотреть в его код, чтобы понять, что он делает.

1. Для сокращения тела метода достаточно применить извлечение метода.
2. Если локальные переменные и параметры препятствуют выделению метода, можно применить замену временной переменной вызовом метода, замену параметров объектом и передачу всего объекта.
3. Если предыдущие способы не помогли, можно попробовать выделить весь метод в отдельный объект с помощью замены метода объектом методов.
4. Условные операторы и циклы свидетельствуют о возможности выделения кода в отдельный метод. Для работы с условными выражениями подходит декомпозиция условных операторов. Для работы с циклом — извлечение метода.

Выигрыш

1. Из всех видов объектного кода дольше всего выживают классы с короткими методами. Чем длиннее ваш метод или функция, тем труднее будет её понять и поддерживать.
2. Кроме того, в длинных методах зачастую можно обнаружить «залежи» дублирования кода.
