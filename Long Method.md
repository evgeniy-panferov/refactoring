Длинный метод

Симптомы и признаки: метод содержит слишком большое число строк кода. Длина метода более десяти строк должна начинать вас беспокоить.

Причины появления

1. В метод всё время что-то добавляется, но ничего не выносится. Так как писать код намного проще, чем читать, этот запах долго остаётся незамеченным — до тех пор пока метод не превратится в настоящего монстра.
2. Стоит помнить, что человеку зачастую ментально сложнее создать новый метод, чем дописать что-то в уже существующий: «Как же, мне нужно добавить всего две строки, не буду же я создавать для этого целый метод».
3. Таким образом, добавляется одна строка за другой, а в результате метод превращается в большую тарелку спагетти.

Лечение: следует придерживаться такого правила: если ощущается необходимость что-то прокомментировать внутри метода, этот код лучше выделить в новый метод. Даже одну строку имеет смысл выделить в метод, если она нуждается в разъяснениях. К тому же, если у метода хорошее название, то не нужно будет смотреть в его код, чтобы понять, что он делает.

1. Для сокращения тела метода достаточно применить <a href="https://github.com/helenasilkina/refactoring/blob/master/Extract_Method%20(Извлечение%20метода).md">извлечение метода</a>.
2. Если локальные переменные и параметры препятствуют выделению метода, можно применить <a href="https://github.com/helenasilkina/refactoring/blob/master/Replace_Temp_with_Query%20(Замена%20переменной%20вызовом%20метода).md">замену временной переменной вызовом метода</a>, <a href="https://github.com/helenasilkina/refactoring/blob/master/Introduce%20Parameter%20Object%20(Замена%20параметров%20объектом).md">замену параметров объектом</a> и <a href="https://github.com/helenasilkina/refactoring/blob/master/Preserve_Whole_Object%20(Передача%20всего%20объекта).md">передачу всего объекта</a>.
3. Если предыдущие способы не помогли, можно попробовать выделить весь метод в отдельный объект с помощью <a href="https://github.com/helenasilkina/refactoring/blob/master/Replace_Method_with_Method%20Object%20(Замена%20метода%20объектом%20методов).md">замены метода объектом методов</a>.
4. Условные операторы и циклы свидетельствуют о возможности выделения кода в отдельный метод. Для работы с условными выражениями подходит <a href="https://github.com/helenasilkina/refactoring/blob/master/Decompose%20Conditional%20(Разбиение%20условного%20оператора).md">декомпозиция условных операторов</a>. Для работы с циклом — <a href="https://github.com/helenasilkina/refactoring/blob/master/Extract_Method%20(Извлечение%20метода).md">извлечение метода</a>.

Выигрыш

1. Из всех видов объектного кода дольше всего выживают классы с короткими методами. Чем длиннее ваш метод или функция, тем труднее будет её понять и поддерживать.
2. Кроме того, в длинных методах зачастую можно обнаружить «залежи» дублирования кода.
