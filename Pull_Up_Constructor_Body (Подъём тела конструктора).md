<strong>Подъём тела конструктора</strong>

Проблема: Подклассы имеют конструкторы с преимущественно одинаковым кодом.

Решение: Создайте конструктор в суперклассе и вынесите в него общий для подклассов код. Вызывайте конструктор суперкласса в конструкторах подкласса.

Примеры: <a href="https://github.com/helenasilkina/refactoring/blob/master/Pull_Up_Constructor_Body.py">Pull_Up_Constructor_Body.py</a>, <a href="https://github.com/helenasilkina/refactoring/blob/master/Pull_Up_Constructor_Body.js">Pull_Up_Constructor_Body.js</a>

Причины рефакторинга: Чем этот рефакторинг отличается от подъёма метода?

1. В Java подклассы не могут наследовать конструктор, поэтому вы не можете просто применить подъём метода к конструктору подкласса и удалить его после перемещения всего кода конструктора в суперкласс. Вдобавок к созданию конструктора в суперклассе нужно будет иметь конструкторы в подклассах с простым делегированием к конструктору суперкласса.
2. В C++ и Java (в случае, если вы явно не вызвали конструктор суперкласса) конструктор суперкласса автоматически вызывается перед конструктором подкласса, что делает обязательным перемещение общего кода только из начала конструкторов подклассов (т.к. вы не сможете вызвать конструктор суперкласса в произвольном месте конструктора подкласса).
3. В большинстве языков программирования конструктор подкласса может иметь свой собственный список параметров, отличный от параметров суперкласса, поэтому вы должны создать конструктор суперкласса только с теми параметрами, которые ему действительно нужны.

Порядок рефакторинга:

1. Создайте конструктор в суперклассе.
2. Извлеките общий код из начала конструктора каждого из подклассов в конструктор суперкласса. Перед этим действием стоит попробовать поместить как можно больше общего кода в начало конструктора.
3. Поместите вызов конструктора суперкласса первой строкой в конструкторах подклассов.
