Замена кода ошибки исключением

Проблема: Метод возвращает определенное значение, которое будет сигнализировать об ошибке.

Решение: Вместе этого следует выбрасывать исключение.

Пример: <a href="https://github.com/helenasilkina/refactoring/blob/master/"></a>

Причины рефакторинга: Возвращение кодов ошибок — давно устаревшая практика процедурного программирования. В современном программировании для обработки ошибок используются специальные классы, называемые исключениями. При возникновении проблемы вы «выбрасываете» такое исключение и оно впоследствии «ловится» одним из обработчиков исключений. При этом запускается специальный код обработки внештатной ситуации, который игнорируется в обычных условиях.

Достоинства

1. Избавляет код от множества условных операторов проверки кодов ошибок. Обработчики исключений намного чётче разграничивают нормальный и нештатный путь исполнения программы.
2. Классы исключений могут реализовывать собственные методы, а значит содержать часть функциональности по обработке ошибок (например, для перевода сообщений об ошибках).
3. В отличие от исключений, коды ошибок не могут быть использованы в конструкторе, т.к. он должен возвращать только новый объект.

Недостатки: Обработку исключений можно превратить в goto-подобный костыль. Не делайте так! Не используйте исключения для управления исполнением кода. Исключения следует выбрасывать только в целях сообщения об ошибке или критической ситуации.

Порядок рефакторинга: Старайтесь выполнять шаги этого рефакторинга только для одного кода ошибки за один раз. Так будет легче удержать в голове все важные сведения и избежать ошибок.

1. Найдите все вызовы метода, возвращающего код ошибки, и оберните его в try/catch блоки вместо проверки кода ошибки.
2. Внутри метода вместо возвращения кода ошибки выбрасывайте исключение.
3. Измените сигнатуру метода так, чтобы она содержала информацию о выбрасываемом исключении (секция @throws).
