Самоинкапсуляция поля

Самоинкапсуляция отличается от обычной «инкапсуляции поля» (Encapsulate field) тем, что рефакторинг производится над приватным полем.

Проблема: вы используете прямой доступ к приватным полями внутри класса.

Решение: создайте геттер и сеттер для поля, и пользуйтесь для доступа к полю только ими.

Причины рефакторинга: бывает так, что вам перестаёт хватать гибкости с прямым доступом к приватному полю внутри класса. Вы хотите иметь возможность инициализировать значение поля при первом запросе или производить какие-то операции над новыми значениями поля в момент присваивания, либо делать все это разными способами в подклассах.

Достоинства: непрямой доступ к полям — это когда работа с полем происходит через методы доступа (геттеры и сеттеры). Этот подход отличается гораздо большей гибкостью, чем прямой доступ к полям.

1. Вы можете осуществлять сложные операции при получении или установке данных в поле. Ленивая инициализация, валидация значений в поле — все это легко реализуемо внутри геттеров и сеттеров поля.
2. Что ещё важнее, вы можете переопределять геттеры и сеттеры в подклассах.
Вы можете вообще не реализовывать сеттер для поля. Значение поля будет задаваться только в конструкторе, делая это поле неизменяемым для всего периода жизни объекта.

Недостатки: когда используется прямой доступ к полям, код выглядит проще и нагляднее, хотя и теряет в гибкости.

Порядок рефакторинга

1. Создайте геттер (и опциональный сеттер) для поля. Они должны быть защищёнными (protected) либо публичными (public).
2. Найдите все прямые обращения к полю и замените их вызовами геттера и сеттера.
