Операторы switch

Симптомы и признаки: у вас есть сложный оператор switch или последовательность if-ов.

Причины появления

1. Одним из очевидных признаков объектно-ориентированного кода служит сравнительно редкое использование операторов типа switch или case. Часто один и тот же блок switch оказывается разбросанным по разным местам программы. При добавлении в него нового варианта приходится искать все эти блоки switch и модифицировать их.
2. Как правило, заметив блок switch, следует подумать о полиморфизме.

Лечение

1. Чтобы изолировать switch и поместить его в нужный класс может понадобиться <a href="https://github.com/helenasilkina/refactoring/blob/master/Extract_Method%20(Извлечение%20метода).md">извлечение метода</a> и <a href="https://github.com/helenasilkina/refactoring/blob/master/Move%20Method%20(Перемещение%20метода).md"></a>перемещение метода.
2. Если switch переключается по коду типа, например, переключается режим выполнения программы, то следует использовать <a href="https://github.com/helenasilkina/refactoring/blob/master/Replace%20Type%20Code%20with%20Subclasses%20(Замена%20кодирования%20типа%20подклассами).md">замену кодирования типа подклассами</a> или <a href="https://github.com/helenasilkina/refactoring/blob/master/Replace%20Type%20Code%20with%20State%20(Strategy)%20(Замена%20кодирования%20типа%20состоянием%20(стратегией)).md">замену кодирования типа состоянием/стратегией</a>.
3. После настройки структуры наследования следует использовать <a href="https://github.com/helenasilkina/refactoring/blob/master/Replace_Conditional_with_Polymorphism%20(Замена%20условного%20оператора%20полиморфизмом).md">замену условного оператора полиморфизмом</a>.
4. Если вариантов в операторе не очень много и все они приводят к вызову одиного и того же метода с разными параметрами, введение полиморфизма будет избыточным. В этом случае стоит задуматься о разбиении этого метода на несколько разных, которые будут выполнять каждый свои функции, для чего нужно применить <a href="https://github.com/helenasilkina/refactoring/blob/master/Replace_Parameter_with_Explicit_Methods%20(Замена%20параметра%20набором%20специализированных%20методов).md">замену параметра набором специализированных методов</a>.
5. Если одним из вариантов условного оператора является null, используйте <a href="https://github.com/helenasilkina/refactoring/blob/master/Introduce_Null_Object%20(Введение%20Null-объекта).md">введение Null-объекта</a>.

Выигрыш: улучшает организацию кода.

Не стоит трогать, если...

1. Когда оператор switch выполняет простые действия, нет никакого смысла что-то менять в коде.
2. Зачастую оператор switch используется фабричных паттернах проектирования (Фабричный метод, Абстрактная фабрика), для выбора создаваемого класса.
