Операторы switch

Симптомы и признаки: У вас есть сложный оператор switch или последовательность if-ов.

Причины появления

1. Одним из очевидных признаков объектно-ориентированного кода служит сравнительно редкое использование операторов типа switch или case. Часто один и тот же блок switch оказывается разбросанным по разным местам программы. При добавлении в него нового варианта приходится искать все эти блоки switch и модифицировать их.
2. Как правило, заметив блок switch, следует подумать о полиморфизме.

Лечение

1. Чтобы изолировать switch и поместить его в нужный класс может понадобиться извлечение метода и перемещение метода.
2. Если switch переключается по коду типа, например, переключается режим выполнения программы, то следует использовать замену кодирования типа подклассами или замену кодирования типа состоянием/стратегией.
3. После настройки структуры наследования следует использовать замену условного оператора полиморфизмом.
4. Если вариантов в операторе не очень много и все они приводят к вызову одиного и того же метода с разными параметрами, введение полиморфизма будет избыточным. В этом случае стоит задуматься о разбиении этого метода на несколько разных, которые будут выполнять каждый свои функции, для чего нужно применить замену параметра набором специализированных методов.
5. Если одним из вариантов условного оператора является null, используйте введение Null-объекта.

Выигрыш: Улучшает организацию кода.

Не стоит трогать, если...

1. Когда оператор switch выполняет простые действия, нет никакого смысла что-то менять в коде.
2. Зачастую оператор switch используется фабричных паттернах проектирования (Фабричный метод, Абстрактная фабрика), для выбора создаваемого класса.
